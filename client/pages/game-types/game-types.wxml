<!--pages/game-types/game-types.wxml-->
<view class="container">
  <!-- åˆ†ç±»å¯¼èˆª -->
  <view class="category-tabs">
    <view 
      class="tab-item {{currentCategory === 'doubles' ? 'active' : ''}}"
      bindtap="switchCategory"
      data-category="doubles"
    >
      åŒæ‰“
    </view>
    <view 
      class="tab-item {{currentCategory === 'singles' ? 'active' : ''}}"
      bindtap="switchCategory"
      data-category="singles"
    >
      å•æ‰“
    </view>
    <view 
      class="tab-item {{currentCategory === 'versus' ? 'active' : ''}}"
      bindtap="switchCategory"
      data-category="versus"
    >
      å¯¹æŠ—
    </view>
    <view 
      class="tab-item {{currentCategory === 'team' ? 'active' : ''}}"
      bindtap="switchCategory"
      data-category="team"
    >
      å›¢ä½“
    </view>
  </view>

  <!-- ç©æ³•åˆ—è¡¨ -->
  <view class="game-list">
    <view 
      class="game-card card"
      wx:for="{{filteredGames}}"
      wx:key="id"
      bindtap="goToCreate"
      data-game="{{item}}"
    >
      <view class="game-header">
        <view class="game-title-row">
          <text class="game-title">{{item.name}}</text>
          <view class="game-tags">
            <text class="tag tag-hot" wx:if="{{item.isHot}}">HOT</text>
            <text class="tag tag-new" wx:if="{{item.isNew}}">NEW</text>
          </view>
        </view>
        <text class="game-desc">{{item.description}}</text>
      </view>

      <view class="game-info">
        <view class="info-item">
          <text class="info-label">äººæ•°èŒƒå›´ï¼š</text>
          <text class="info-value">{{item.playerRange}}</text>
        </view>
        <view class="info-item" wx:if="{{item.rounds}}">
          <text class="info-label">è½®æ•°ï¼š</text>
          <text class="info-value">{{item.rounds}}</text>
        </view>
        <view class="info-item" wx:if="{{item.scoring}}">
          <text class="info-label">è®¡åˆ†ï¼š</text>
          <text class="info-value">{{item.scoring}}</text>
        </view>
      </view>

      <view class="game-footer">
        <button class="btn-primary create-btn" bindtap="goToCreate" data-game="{{item}}" catchtap="stopPropagation">
          å‘èµ·
        </button>
        <view class="action-links">
          <text class="link-text" bindtap="showDetail" data-game="{{item}}" catchtap="stopPropagation">è¯¦ç»†ä»‹ç»</text>
          <text class="link-text" bindtap="showExample" data-game="{{item}}" catchtap="stopPropagation">ç¤ºä¾‹</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{filteredGames.length === 0}}">
    <view class="empty-state-icon">ğŸ¸</view>
    <view class="empty-state-text">æš‚æ— ç©æ³•</view>
  </view>
</view>

<!-- è¯¦ç»†ä»‹ç»å¼¹çª— -->
<view class="modal" wx:if="{{showDetailModal}}" bindtap="hideDetail">
  <view class="modal-content" catchtap="stopPropagation">
    <view class="modal-header">
      <text class="modal-title">{{currentGame.name}}</text>
      <text class="modal-close" bindtap="hideDetail">âœ•</text>
    </view>
    <view class="modal-body">
      <view class="detail-section">
        <text class="section-title">ç©æ³•è¯´æ˜</text>
        <text class="section-content">{{currentGame.detailDescription || currentGame.description}}</text>
      </view>
      <view class="detail-section" wx:if="{{currentGame.rules}}">
        <text class="section-title">è§„åˆ™è¦ç‚¹</text>
        <view class="rules-list">
          <text class="rule-item" wx:for="{{currentGame.rules}}" wx:key="index" wx:for-item="rule">
            â€¢ {{rule}}
          </text>
        </view>
      </view>
    </view>
  </view>
</view>

