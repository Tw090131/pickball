<!--pages/my-events/my-events.wxml-->
<view class="container">
  <!-- æ´»åŠ¨åˆ—è¡¨ -->
  <view class="event-list">
    <view 
      class="event-card card"
      wx:for="{{events}}"
      wx:key="id"
      bindtap="goToEventDetail"
      data-id="{{item.id}}"
    >
      <view class="event-header">
        <view class="event-title">{{item.title}}</view>
        <view class="status-tag {{item.statusClass}}">{{item.statusText}}</view>
      </view>
      
      <view class="event-info">
        <view class="info-item">
          <text class="info-icon">ğŸ“…</text>
          <text>{{item.startTimeFormatted}}</text>
        </view>
        <view class="info-item">
          <text class="info-icon">ğŸ“</text>
          <text>{{item.location}}</text>
        </view>
        <view class="info-item">
          <text class="info-icon">ğŸ‘¥</text>
          <text>{{item.currentParticipants}}/{{item.maxParticipants}}äºº</text>
          <text class="tag tag-danger" wx:if="{{item.isFull}}" style="margin-left: 10rpx; font-size: 20rpx;">å·²æ»¡</text>
        </view>
        <view class="info-item">
          <text class="info-icon">ğŸ†</text>
          <text>{{item.formatText}} Â· {{item.scoringSystem}}åˆ†åˆ¶</text>
        </view>
        <view class="info-item">
          <text class="info-icon">ğŸ”„</text>
          <text>{{item.rotationRule}}</text>
        </view>
        <view class="info-item" wx:if="{{item.registrationFee > 0}}">
          <text class="info-icon">ğŸ’°</text>
          <text>æŠ¥åè´¹ï¼šÂ¥{{item.registrationFee}}</text>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’®ï¼ˆä»…æˆ‘å‘å¸ƒçš„æ˜¾ç¤ºï¼‰ -->
      <view class="event-actions" wx:if="{{type === 'created'}}">
        <button 
          class="btn-delete"
          bindtap="deleteEvent"
          data-id="{{item.id}}"
          data-title="{{item.title}}"
          catchtap="true"
        >
          åˆ é™¤
        </button>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="empty-state" wx:if="{{loading}}">
    <view class="empty-state-icon">â³</view>
    <view class="empty-state-text">åŠ è½½ä¸­...</view>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && error}}">
    <view class="empty-state-icon">âš ï¸</view>
    <view class="empty-state-text">{{error}}</view>
    <button class="btn-primary" bindtap="loadEvents" style="margin-top: 20rpx;">é‡è¯•</button>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && !error && events.length === 0}}">
    <view class="empty-state-icon">ğŸ“‹</view>
    <view class="empty-state-text">{{emptyText}}</view>
    <button 
      class="btn-primary" 
      wx:if="{{type === 'created'}}"
      bindtap="goToCreate"
      style="margin-top: 20rpx;"
    >
      å»å‘å¸ƒæ´»åŠ¨
    </button>
  </view>
</view>

